---
title: "쿠키, 세션, 로컬 스토리지 비교"

categories:
- Web

tags:
- Web
- Login
---

#### 쿠키
- HTTP 요청시 헤더에 자동으로 포함됨
- 데이터가 서버에 저장되지 않기에 서버의 공간을 절약 할 수 있음
- 데이터가 문자열만 저장이 가능함 객체는 JSON.stringify()를 써서 저장해야함
- 서브 도메인들끼리 공유가 가능함

#### 로컬 스토리지
- 브라우저를 종료해도 영구적으로 데이터가 남아있음
- JS 코드로 어디서든 접근이 가능함
- 브라우저에 데이터가 영구적으로 남아있음
- 객체 타입의 데이터를 저장할 수 있음

#### 세션 스토리지
- 브라우저를 닫을 경우 세션이 사라져버림
- 일반적인 세션을 저장할 때 사용가능하지만 일시적으로    
클라이언트가 데이터 저장 용도로도 사용 가능함



  
<br/>

**세 저장소 모두 같은 도메인에선 저장소를 공유 가능함.
그럼 무엇을 써야 하는가?**
<p style="text-align: center; font-size: 20px">
  <img src="https://github.com/kkjh9909/kkjh9909.github.io/assets/63646062/9f72aa4a-6882-423f-becf-eb76f7a0bea9"/>
  (유튜브의 쿠키 목록)
</p>

구글의 유튜브의 경우에는 로그인 정보를 로컬스토리지에서 저장하지 않고 쿠키를 사용함.   
그런데 구글은 YOUTUBE, GMAIL, GOOGLE 등 한쪽에서 로그인 시에 모든 서비스가 이용 가능함.

[https://www.google.com](https://www.google.com)   
[https://gmail.google.com](https://gmail.google.com)   
[https://www.youtube.com](https://youtube.com)   
[https://accounts.google.com](https://accounts.google.com)
[http://drive.google.com](http://drive.google.com)

등등 구글의 서비스들의 링크를 보면 유튜브를 제외한 사이트는 xxx.google.com 이 공통으로 들어감   
그리고 한쪽에서 로그인 시에 accounts.google.com 링크로 가서 인증 후 쿠키를 발급 받고 모든 서비스 이용이 가능함   
또한 쿠키의 만료기한이 13개로 긴편이고 여러 쿠키를 사용해서 로그인과 보안을 유지함(Refresh Token을 사용하진 않는 것으로 보임)

**그럼 왜 구글은 모두가 공유 가능한가?**   
   
이렇게 계정 하나로 모든 웹사이트가 공유하는걸 SSO (Single Sign On)라고 하는데 사용자 경험을 위해 
많은 사이트들이 이러한 방식을 도입했음. 
   
근데 쿠키의 경우 다른 도메인끼리는 공유를 못하는게 일반적임.   

구글의 경우 최상위 도메인은 google.com 으로 설정이 되어 있음   
다른 서비스들의 경우에는 
xxx.google.com 등으로 끝나는게 많음      
   
쿠키의 경우에는 일반적으론 도메인끼리 공유가 안되지만 상위 도메인과 서브 도메인끼리는 공유가 가능함.
google.com이 상위 도메인이고 xxx.google.com 등 서브 도메인을 만든 후에
도메인들끼리 쿠키를 공유하는 것으로 예상됨.   
   
## 결론
1. 쿠키가 구현도 간단하고 자동으로 헤더에 담겨서 서브 도메인들끼리 공유가 가능하기에 사용하기에 좋은 것 같다.
2. 로컬 스토리지의 경우에는 만료날짜를 설정하지 못해서 로그인 정보를 담기엔 취약하다.
3. 세션의 경우 브라우저 종료시 사라지기도 하고 서버의 부담이 크다.
4. 구글은 쿠키 여러개를 활용해서 로그인을 유지하고 쿠키의 기한을 길게 잡아서 자동로그인을 구현함.
   
---
- 사이트의 구조가 커지고 여러 서버를 통해 로그인 정보를 공유하려면 쿠키도 좋은 선택지 일 수 있음.   
- Refresh Token을 활용해서 자동 로그인을 구현할 필요 없이 쿠키 여러개를 같이 활용해서 로그인을 유지하면 DB에 저장할 필요도 없고
더 나은 방법이 될 수도 있는 것으로 보임
---